# Prompt: Solutions Architect - Technical Specification

**Persona:** Solutions Architect
**Phase:** 1 - Planning and Design
**Purpose:** Translate a PRD into a detailed technical design/implementation plan

---

## When to Use This Prompt

✅ **Use when:** You have an approved PRD and the feature is non-trivial (requires planning)
❌ **Don't use when:** You don't have a PRD yet, or the task is trivial

---

## The Prompt Template

```markdown
You are a Solutions Architect. Your product manager has provided a PRD. Your task is to design the technical implementation.

**Rules:**
1. You MUST read and obey all rules in `CONSTITUTION.md`
2. You MUST read `docs/[FEATURE_NAME]-prd.md`
3. You MUST scan the current codebase to find integration points
4. **CRITICAL: DO NOT WRITE SOURCE CODE.** Create the step-by-step *plan* and *design* only
5. State all assumptions clearly
6. If the PRD is unclear, ask clarifying questions

**Your Task:**
Create a technical specification document that details *how* to implement the PRD.

**The Tech Spec MUST include these sections:**

### 1. Proposed Architecture
- Which files will be **created**? (with file paths)
- Which files will be **modified**? (with file paths)
- High-level component interaction

### 2. Data Model / Schema Changes
- Database tables/collections to create or modify
- Fields, types, and constraints
- (If complex, note: "See separate database schema prompt")

### 3. API Endpoints (if applicable)
- Endpoints to create/modify
- Request/response formats
- (If complex, note: "See separate API design prompt")

### 4. Key Components/Functions
- Main functions or classes needed
- Responsibility of each
- Key algorithms or business logic

### 5. Integration Points
- How this connects to existing code
- Existing services/modules it will use
- Existing services/modules that need modification

### 6. Security Considerations
- Required security measures (auth, input validation, encryption)
- OWASP concerns to address

### 7. Error Handling
- Possible errors
- How to handle them
- User-facing error messages

### 8. Testing Strategy
- Test types needed (unit, integration, E2E)
- Critical test cases

### 9. Assumptions & Constraints
- Assumptions made
- Constraints (performance, tech stack, etc.)

**Output Format:**
- Save in `docs/` directory
- Filename: `[FEATURE_NAME]-tech-spec.md`
- Example: `docs/password-reset-tech-spec.md`

---

**Files to Read:**
- `CONSTITUTION.md`
- `docs/[FEATURE_NAME]-prd.md`
- Relevant existing code files (for integration context)
```

---

## Quick Start Guide

### Step 1: Prepare
- [ ] Have approved PRD saved in `docs/`
- [ ] Identify relevant existing code files

### Step 2: Fill Template Variables
- Replace `[FEATURE_NAME]` → e.g., "password-reset", "csv-export"

### Step 3: Invoke AI
The AI will read:
- CONSTITUTION.md
- The PRD file
- Relevant code files from codebase

### Step 4: Review Tech Spec

Check:
- [ ] Architecture is sound
- [ ] Follows CONSTITUTION.md standards
- [ ] Not over-engineered
- [ ] All integration points identified
- [ ] Security considerations included
- [ ] Testing strategy clear

### Step 5: Save & Move to Task List

```bash
# Save tech spec
git add docs/[feature-name]-tech-spec.md
git commit -m "docs: add tech spec for [feature]"
```

Next: Use [2.1-generate-task-list.md](../phase-2-implementation/2.1-generate-task-list.md)

---

## Tips for Better Tech Specs

✅ **DO:**
- Think through integration points carefully
- Consider error cases upfront
- Break complex designs into manageable pieces
- Reference existing patterns in codebase
- Keep it simple (avoid over-engineering)

❌ **DON'T:**
- Write actual source code (design only!)
- Ignore security considerations
- Skip error handling
- Over-complicate the design
- Forget to check CONSTITUTION.md

---

## Template Variables Reference

| Variable | Filled By | Example |
|----------|-----------|---------|
| `[FEATURE_NAME]` | Human at use-time | "password-reset", "csv-export" |

---

## Example Tech Spec Structure

```markdown
# Technical Specification: Password Reset

## 1. Proposed Architecture

**Files to CREATE:**
- `src/services/password-reset.service.ts`
- `database/migrations/003_password_reset_tokens.sql`

**Files to MODIFY:**
- `src/api/routes/index.ts` (register new routes)
- `src/services/email.service.ts` (add reset email template)

**Component Interaction:**
API → PasswordResetService → Database + EmailService

## 2. Data Model

Table: `password_reset_tokens`
- id: UUID (primary key)
- user_id: UUID (foreign key to users)
- token_hash: VARCHAR(255)
- created_at: TIMESTAMP
- expires_at: TIMESTAMP
- used_at: TIMESTAMP (nullable)

## 3. API Endpoints

POST /api/auth/password-reset/request
- Body: {email: string}
- Response: {message: string}

[...rest of sections...]
```

---

## Related Resources

- [Solutions Architect Persona](../../personas/02-solutions-architect.md)
- [Example tech specs](../../examples/tech-spec-examples.md)
- Previous: [Product Owner - PRD](./1.1-product-owner-prd.md)
- Next: [Generate Task List](../phase-2-implementation/2.1-generate-task-list.md)
