# Prompt: QA Bugs & Edge Cases Analysis

**Persona:** QA Engineer (Specialist Focus: Correctness)
**Phase:** 3 - Review and Refactoring
**Purpose:** Deep analysis of potential bugs and edge cases

---

## When to Use This Prompt

✅ **Use when:**
- You want to find bugs before they reach production
- The code has complex logic or calculations
- You're testing critical paths (auth, payments, data mutations)
- You want to identify missing test cases

❌ **Don't use when:**
- You want broad feedback (use comprehensive review)
- You want performance analysis (use 3.X-performance)
- Code is trivial with no logic

---

## The Prompt Template

```markdown
You are a QA Engineer specializing in bug detection. Analyze this code for potential bugs, logic flaws, and edge cases.

**Code to Analyze:**
[Paste your code]

**Your Task:**
Find ALL potential bugs and edge cases. For each issue:
1. Describe the bug or edge case
2. Explain what could go wrong
3. Provide a test case that would trigger it
4. Suggest a fix

**Edge Case Checklist:**
Use this checklist to guide your analysis:

**Data Edge Cases:**
- [ ] Empty string / empty array / empty object
- [ ] Null / undefined / None
- [ ] Zero / negative numbers
- [ ] Very large numbers (overflow)
- [ ] Special characters in strings
- [ ] Unicode characters
- [ ] Extremely long strings (> 1000 chars)
- [ ] Duplicate values

**Boundary Conditions:**
- [ ] First item in list
- [ ] Last item in list
- [ ] Single-item list
- [ ] Off-by-one errors
- [ ] Index out of bounds

**API/Function Edge Cases:**
- [ ] Missing required parameters
- [ ] Extra unexpected parameters
- [ ] Wrong data types
- [ ] Malformed input (e.g., invalid JSON)
- [ ] Concurrent requests
- [ ] Timeout scenarios

**Authentication/Authorization:**
- [ ] Unauthenticated user
- [ ] Authenticated but unauthorized user
- [ ] Expired token
- [ ] Invalid token

**Output Format:**
For each bug/edge case:
- **Issue:** [Description]
- **What goes wrong:** [Impact]
- **Test case:** [How to reproduce]
- **Fix:** [Code suggestion]

---

**Files to Attach:**
- Code to analyze
- CONSTITUTION.md (optional, for context)
```

---

## Example Edge Cases to Look For

### Data Validation
```python
# ❌ Bug: No validation for negative quantity
def calculate_total(quantity, price):
    return quantity * price

# Test case: calculate_total(-5, 10.00) → -50.00 (invalid)
```

### Null/Undefined Handling
```javascript
// ❌ Bug: Crashes if user.profile is null
function getCity(user) {
    return user.profile.city;
}

// Test case: getCity({id: 1, profile: null}) → TypeError
```

### Array Index
```python
# ❌ Bug: IndexError if list is empty
def get_first_user(users):
    return users[0]

# Test case: get_first_user([]) → IndexError
```

### Division by Zero
```python
# ❌ Bug: Division by zero
def calculate_average(total, count):
    return total / count

# Test case: calculate_average(100, 0) → ZeroDivisionError
```

---

## Related Resources

- [QA Engineer Persona](../../personas/04-qa-engineer.md)
- Next: [Security Audit](./3.3-qa-security-audit.md)
